let cropper;document.getElementById("crop-image-upload").addEventListener("change",(function(e){const file=e.target.files[0];if(file){const reader=new FileReader;reader.onload=function(event){const imgElement=document.createElement("img");imgElement.id="image-to-crop";imgElement.src=event.target.result;imgElement.style.maxWidth="100%";const cropArea=document.getElementById("crop-area");cropArea.innerHTML="";cropArea.appendChild(imgElement);cropper=new Cropper(imgElement,{aspectRatio:1,viewMode:1,autoCropArea:1})};reader.readAsDataURL(file)}}));function cropImage(){if(cropper){const croppedCanvas=cropper.getCroppedCanvas();if(croppedCanvas){const croppedImage=croppedCanvas.toDataURL("image/png");const downloadLink=document.createElement("a");downloadLink.href=croppedImage;downloadLink.download="cropped-image.png";document.body.appendChild(downloadLink);downloadLink.click();document.body.removeChild(downloadLink)}else{console.error("Failed to get cropped canvas")}}else{console.error("Cropper is not initialized")}}